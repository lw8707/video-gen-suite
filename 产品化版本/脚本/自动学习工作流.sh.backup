#!/bin/bash
echo "ğŸ”„ æ‰§è¡Œè‡ªåŠ¨å­¦ä¹ å·¥ä½œæµ..."

# 1. æ£€æŸ¥æ–°æŠ€æœ¯åŠ¨æ€
echo "1. ğŸ“¡ æ‰«ææŠ€æœ¯åŠ¨æ€..."
# è¿™é‡Œå¯ä»¥é›†æˆcurlè·å–ç½‘é¡µä¿¡æ¯

# 2. æ›´æ–°å­¦ä¹ åº“
echo "2. ğŸ“š æ›´æ–°å­¦ä¹ åº“..."
if [ -f "å‰æ²¿æŠ€æœ¯å­¦ä¹ åº“.json" ]; then
    å½“å‰æ—¶é—´=$(date)
    jq --arg æ—¶é—´ "$å½“å‰æ—¶é—´" '.å­¦ä¹ çŠ¶æ€.æœ€åæ›´æ–°æ—¶é—´ = $æ—¶é—´' å‰æ²¿æŠ€æœ¯å­¦ä¹ åº“.json > temp.json && mv temp.json å‰æ²¿æŠ€æœ¯å­¦ä¹ åº“.json
fi

# 3. ç”Ÿæˆå­¦ä¹ æŠ¥å‘Š
echo "3. ğŸ“Š ç”Ÿæˆå­¦ä¹ æŠ¥å‘Š..."
cat > æŠ€æœ¯å­¦ä¹ æŠ¥å‘Š_$(date +%Y%m%d_%H%M%S).md << 'REPORTEOF'
# æŠ€æœ¯å­¦ä¹ æŠ¥å‘Š
## æ‰«ææ—¶é—´
$(date)

## å‘ç°çš„æ–°æŠ€æœ¯
- å¾…ä»å®é™…æ‰«æä¸­å¡«å……

## ç«‹å³åº”ç”¨å»ºè®®
1. åœ¨ç°æœ‰é¡¹ç›®ä¸­é›†æˆMCPåè®®
2. ç ”ç©¶æŠ—é‡å­å¯†ç å­¦æ–¹æ¡ˆ
3. ä¼˜åŒ–ä¿¡æ¯æµå·¥ä½œæµ

## ä¸‹ä¸€æ­¥å­¦ä¹ é‡ç‚¹
åŸºäºé¡¹ç›®éœ€æ±‚ä¼˜å…ˆå­¦ä¹ ç›¸å…³æŠ€æœ¯
REPORTEOF

echo "âœ… è‡ªåŠ¨å­¦ä¹ å·¥ä½œæµå®Œæˆ"
