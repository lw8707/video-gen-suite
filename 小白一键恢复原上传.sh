#!/bin/bash
echo "ğŸš€ å°ç™½ä¸“ç”¨ï¼šæ¢å¤åŸæ ·è‡ªåŠ¨ä¸Šä¼ ï¼ˆç”¨å›å…¬é’¥ï¼‰..."

# 1. æŠŠè¿œç¨‹åœ°å€æ”¹å› ssh æ ¼å¼ï¼ˆå…¬é’¥è‡ªåŠ¨è®¤è¯ï¼‰
git remote set-url origin git@github.com:lw8707/video-gen-suite.git

# 2. ç«‹å³æµ‹è¯•ä¸Šä¼ ï¼ˆä¸ç”¨å¯†ç ï¼‰
git add .
git commit -m "æ¢å¤åŸæ ·ä¸Šä¼ : $(date +%m%d_%H%M%S)"
git push origin main

# 3. ç»“æœæç¤º
if [ $? -eq 0 ]; then
    echo "âœ… åŸæ ·ä¸Šä¼ æˆåŠŸï¼åˆå¯ä»¥ç”¨å›è€è„šæœ¬äº†"
else
    echo "âš ï¸  å…¬é’¥å¥½åƒæœ‰é—®é¢˜ï¼Œæˆ‘å¸®ä½ å†ç”Ÿæˆä¸€æ¬¡"
    # é‡æ–°ç”Ÿæˆå…¬é’¥ï¼ˆä¸€è·¯å›è½¦å³å¯ï¼‰
    ssh-keygen -t ed25519 -C "lw8707@github.com" -f ~/.ssh/id_ed25519 -N ""
    # æŠŠæ–°å…¬é’¥æ˜¾ç¤ºå‡ºæ¥ï¼Œå¤åˆ¶åˆ° GitHub å³å¯
    echo "ğŸ“‹ ä¸‹é¢è¿™æ®µå°±æ˜¯æ–°å…¬é’¥ï¼Œå…¨é€‰å¤åˆ¶ï¼š"
    cat ~/.ssh/id_ed25519.pub
    echo ""
    echo "ğŸ‘‰ æ‰“å¼€ https://github.com/settings/ssh/new"
    echo "ğŸ‘‰ æŠŠä¸Šé¢å†…å®¹ç²˜è´´è¿›å»ï¼Œä¿å­˜å³å¯"
    echo "ğŸ‘‰ ä¿å­˜å®Œå†è¿è¡Œä¸€æ¬¡æœ¬è„šæœ¬å°±å½»åº•æ¢å¤"
fi
